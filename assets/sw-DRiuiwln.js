const c="iching-explorer-v1.3",n="/iching-explorer-public";const l=[`${n}/`,`${n}/index.html`,`${n}/manifest.json`,...Array.from({length:64},(e,r)=>`${n}/hexagramJSONS/hexagram${r+1}.json`)],s=!self.location.hostname.includes("localhost");self.addEventListener("install",e=>{s&&e.waitUntil(caches.open(c).then(r=>r.addAll(l)))});self.addEventListener("fetch",e=>{s&&(e.request.method!=="GET"||!e.request.url.startsWith("http")||e.respondWith(caches.match(e.request).then(r=>r||fetch(e.request).then(t=>{if(!t||t.status!==200||t.type!=="basic")return t;const i=t.clone();return caches.open(c).then(a=>{a.put(e.request,i)}),t}))))});self.addEventListener("activate",e=>{if(!s)return;const r=[c];e.waitUntil(caches.keys().then(t=>Promise.all(t.map(i=>{if(!r.includes(i))return caches.delete(i)}))))});s||self.addEventListener("activate",()=>{self.registration.unregister().then(()=>{console.log("Service worker unregistered in development mode.")})});
